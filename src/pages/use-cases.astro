---
import BaseLayout from "@layouts/BaseLayout.astro";
import Section from "@components/ui/Section.astro";
import { Image } from "astro:assets";
import UseCaseTabs from "@components/react/UseCaseTabs";
import heroBgImg from "@assets/banner/photo-1551288049-bebda4e38f71.jpg";

import directus from "../lib/directus";
import { readItems } from "@directus/sdk";

interface UseCase {
  id: string;
  title: string;
  shortdesc: string;
  category: string;
  content: string;
  tags: string[] | string | null;
  slug: string;
  image: string | null;
}

// 1. Fetch Use Cases from Directus (Using blog_post collection as per data model)
let useCases: UseCase[] = [];
try {
  useCases = (await directus.request(
    readItems("blog_post", {
      filter: {
        status: { _eq: "published" },
      },
      fields: [
        "id",
        "title",
        "shortdesc",
        "category",
        "content",
        "tags",
        "slug",
        "image",
      ],
      sort: ["-date_created"],
    }),
  )) as UseCase[];
} catch (error) {
  console.error("Error fetching use cases from Directus:", error);
}
---

<BaseLayout title="Use Cases - Industry Solutions">
  <!-- Hero Section -->
  <section
    class="relative h-[70vh] min-h-[500px] flex items-center overflow-hidden"
  >
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0">
      <Image
        src={heroBgImg}
        alt="Industry solutions and use cases"
        class="w-full h-full object-cover"
        width={2070}
        height={1380}
      />
      <div
        class="absolute inset-0 bg-linear-to-r from-slate-900/95 via-slate-900/80 to-slate-900/50"
      >
      </div>
    </div>

    <!-- Content -->
    <div class="container mx-auto relative z-10 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <h1
          class="text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight"
        >
          Industry <span
            class="text-transparent bg-clip-text bg-linear-to-r from-blue-400 via-teal-400 to-blue-400"
          >
            Use Cases
          </span>
        </h1>

        <p
          class="text-xl md:text-2xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed"
        >
          Real-world solutions delivering measurable results across diverse
          industries. See how we've transformed operations.
        </p>
      </div>
    </div>
  </section>

  <!-- Use Cases with Tabs -->
  <Section background="gray">
    <UseCaseTabs useCases={useCases} client:load />
  </Section>
</BaseLayout>
